(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[849],{21985:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/changes",function(){return t(4920)}])},4920:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eu}});var s=t(52322),i=t(21658),r=t(2784),l=t(97729),o=t.n(l),c=t(65077),a=t(56580),d=t(32038),u=t(75289),x=t(951),h=function(e){var n=e.children;return(0,s.jsx)(u.kC,{sx:{alignItems:"center",justifyContent:"space-between",mt:"8px",bg:"grey02",borderRadius:4,padding:"12px 16px"},children:n})},m=t(36882),p=t(39097),f=t.n(p),g=t(7819),j=t(67445),v=function(e){var n=e.ct,t=e.status,i=e.authStatus,r=e.isOnline;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.xu,{as:"td",style:{width:"40%"},children:(0,s.jsx)(u.xv,{sx:{fontWeight:500},children:n.label})}),(0,s.jsx)(u.xu,{as:"td",style:{width:"40%"},children:n.id}),(0,s.jsx)(u.xu,{as:"td",style:{width:"20%"},children:(0,s.jsx)(m.O,{modelType:"Custom Type",modelId:n.id,status:t,authStatus:i,isOnline:r,"data-for":"".concat(n.id,"-tooltip"),"data-tip":!0})})]})},y=function(e){var n=e.customTypes,t=e.modelsStatuses,i=e.authStatus,r=e.isOnline;return(0,s.jsxs)(u.xu,{as:"table","data-legacy-component":!0,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"transparent small",children:[(0,s.jsx)(u.xu,{as:"th",sx:{width:"40%",fontWeight:600},children:"Name"}),(0,s.jsx)(u.xu,{as:"th",sx:{width:"40%",fontWeight:600},children:"API ID"}),(0,s.jsx)(u.xu,{as:"th",sx:{width:"20%",fontWeight:600},children:"Status"})]})}),(0,s.jsx)("tbody",{children:n.map(function(e){return(0,g.TG)(e)?(0,s.jsx)(f(),{passHref:!0,href:j.cd[e.local.format].getBuilderPagePathname(e.local.id),children:(0,s.jsx)("tr",{tabIndex:0,children:(0,s.jsx)(v,{ct:e.local,status:t.customTypes[e.local.id],authStatus:i,isOnline:r,modelsStatuses:t},e.local.id)})},e.local.id):(0,s.jsx)("tr",{tabIndex:0,className:"disabled",children:(0,s.jsx)(v,{ct:e.remote,status:t.customTypes[e.remote.id],authStatus:i,isOnline:r,modelsStatuses:t},e.remote.id)})})})]})},b=t(59469),_=t(31841),C=t(15996),S=t(84449),T=t(82223),D=t(47731),k=t(32681),O=function(e){var n=e.unSyncedCustomTypes,t=e.unSyncedSlices,i=e.modelsStatuses,r=e.authStatus,l=e.isOnline,o=(0,D.H)(),c=o.modalPayload,a=o.onOpenModal,d=c.sliceFilterFn,m=c.defaultVariationSelector,p=t.filter(function(e){return i.slices[e.model.id]!==k.G.Deleted});return(0,s.jsxs)(s.Fragment,{children:[n.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h,{children:(0,s.jsxs)(u.xu,{children:[(0,s.jsx)(u.xv,{variant:"heading",children:"Types"}),(0,s.jsx)(u.xv,{variant:"grey",sx:{ml:"8px"},children:n.length})]})}),(0,s.jsx)(y,{customTypes:n,modelsStatuses:i,authStatus:r,isOnline:l})]}),t.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.xu,{sx:{mb:"8px"},children:(0,s.jsxs)(h,{children:[(0,s.jsxs)(u.xu,{children:[(0,s.jsx)(u.xv,{variant:"heading",children:"Slices"}),(0,s.jsx)(u.xv,{variant:"grey",sx:{ml:"8px"},children:t.length})]}),(0,s.jsxs)(u.xu,{children:[t.some(function(e){return(0,T.c)(e)>0&&i.slices[e.model.id]!==k.G.Deleted})&&(0,s.jsxs)(u.xv,{sx:{mr:3,color:"warning02",fontSize:"12px",lineHeight:"16px",fontWeight:600},children:[(0,s.jsx)(x.sQg,{size:16,style:{marginRight:"4px",position:"relative",top:"3px"}}),"Missing Screenshots"]}),(0,s.jsxs)(u.zx,{variant:"darkSmall",onClick:function(){return a({sliceFilterFn:function(e){return e}})},children:[(0,s.jsx)(x.hOO,{style:{color:"#FFF",fontSize:"15px",position:"relative",top:"3px",marginRight:"4px"}})," ","Update all screenshots"]})]})]})}),(0,s.jsx)(b.Z,{gridGap:"32px 16px",elems:t,gridTemplateMinPx:"290px",defineElementKey:function(e){return e.model.name},renderElem:function(e){return C.M.render({showActions:!0,slice:e,wrapperType:i.slices[e.model.id]!==k.G.Deleted?_.WT.clickable:_.WT.nonClickable,StatusOrCustom:{status:i.slices[e.model.id],authStatus:r,isOnline:l},actions:{onUpdateScreenshot:function(n){n.preventDefault(),a({sliceFilterFn:function(n){return n.filter(function(n){return n.model.id===e.model.id})}})}}})}}),(0,s.jsx)(S.Z,{slices:d(p),defaultVariationSelector:m})]})]})},w=t(91914),N=function(){return(0,s.jsx)(u.kC,{sx:{justifyContent:"center",alignItems:"center",flex:1},children:(0,s.jsxs)(u.kC,{sx:{flexDirection:"column",alignItems:"center",transform:"translateY(-50%)"},children:[(0,s.jsx)(w.wQ1,{size:48}),(0,s.jsx)(u.xv,{sx:{fontWeight:600,fontSize:"24px",lineHeight:"32px",mb:"8px",mt:"2px"},children:"No internet connection"}),(0,s.jsx)(u.xv,{sx:{fontSize:"13px",lineHeight:"24px"},children:"You need a stable internet connection to review and push changes"})]})})},R=t(90374),Z=function(){var e=(0,R.Z)().openLoginModal;return(0,s.jsx)(u.kC,{sx:{justifyContent:"center",alignItems:"center",flex:1},children:(0,s.jsxs)(u.kC,{sx:{flexDirection:"column",alignItems:"center",transform:"translateY(-50%)"},children:[(0,s.jsx)(u.xv,{sx:{fontWeight:600,fontSize:"24px",lineHeight:"32px",mb:"8px",mt:"2px"},children:"Could not access your repository"}),(0,s.jsx)(u.xv,{sx:{fontSize:"13px",lineHeight:"24px"},children:"You need to log in to Prismic in order to push your changes."}),(0,s.jsx)(u.zx,{sx:{mt:"24px"},onClick:function(){return e()},children:"Log in to Prismic"})]})})},E=t(5632),z=t.n(E),F=t(2754),I=t(34543),M=t(62230),W=t(85244),H=t(98240),P=t(6277);t(25977);var A={primary:"_1ecs97d74o _1ecs97d74p _1ecs97d74i _1ecs97d74j _1ecs97d74q _1ecs97d74r",secondary:"_1ecs97d6pe _1ecs97d6pf _1ecs97d6p8 _1ecs97d6p9 _1ecs97d6pg _1ecs97d6ph"},U={normal:"ovkapw1",smallBold:"ovkapw2",inherit:"ovkapw3 _1ecs97d9gi"},B=function(e){var n=e.children,t=e.color,l=e.endIcon,o=e.href,c=e.textVariant,a=void 0===c?"smallBold":c,d=(0,H.Z)(e,["children","color","endIcon","href","textVariant"]);return(0,s.jsxs)("a",(0,W.Z)((0,M.Z)({href:o,target:"_blank",rel:"noreferrer"},d),{className:(0,P.Z)("ovkapw0 _1ecs97d9bi _1ecs97d9gc _1ecs97d9bk _1ecs97d9bq",A[void 0===t?"primary":t]),children:[(0,s.jsx)(i.xv,{component:"span",color:"inherit",variant:a,children:n}),(0,r.isValidElement)(l)?(0,r.cloneElement)(l,{className:(0,P.Z)(l.props.className,"_1ecs97d9r7",U[a])}):null]}))},G=t(39092),V=function(){var e,n=(e=(0,a.v9)(function(e){return{repoName:(0,G.MY)(e)}}).repoName,"https://".concat(e,".prismic.io/documents/working"));return(0,s.jsxs)(F.R$,{style:{alignSelf:"center",marginTop:i.TV.size[72]},children:[(0,s.jsx)(F.u2,{children:(0,s.jsx)(i.Ee,{src:"/blank-slate-changes-uptodate.png",sizing:"cover"})}),(0,s.jsxs)(F.T9,{children:[(0,s.jsx)(F._T,{children:"Everything up-to-date"}),(0,s.jsx)(F.nf,{children:"You have no changes staged. Your changes appear here after you have saved them, while they're waiting to be pushed to the Page Builder. Ready to get going?"}),(0,s.jsxs)(F.Qj,{children:[(0,s.jsx)(i.zx,{onClick:function(){z().push("/")},children:"Create a page type"}),(0,s.jsx)(B,{endIcon:(0,s.jsx)(I.AlO,{}),textVariant:"normal",href:n,children:"Create content"})]})]})]})},Y=t(79096),q=t(85412),L=t(32665),X=t(3098),Q=t(56577),J=t(24340),$=t(77174),K=t(49471),ee=t(57282),en=t(78656),et=function(e){var n=e.ctName,t=e.numberOfDocuments,i=e.link,r=e.isOverLimit;return(0,s.jsxs)(u.Zb,{sx:{mb:12},variant:"drawerCard","data-cy":"AssociatedDocumentsCard-".concat(n),children:[(0,s.jsxs)(u.kC,{sx:{flexDirection:"column"},children:[(0,s.jsx)(u.xv,{children:n}),(0,s.jsxs)(u.xv,{sx:{color:"textClear",fontSize:"12px",lineHeight:"16px"},children:[t," documents"]})]}),(0,s.jsx)(u.rU,{href:i,target:"_blank",variant:"cardSmall",sx:{color:void 0!==r&&r?"danger":"purple08"},children:"View documents"})]})},es=function(e){var n=e.format,t=e.id,i=e.name;return(0,s.jsxs)(u.Zb,{sx:{mb:12},variant:"drawerCard","data-cy":"CustomTypesReferencesCard-".concat(i),children:[(0,s.jsxs)(u.kC,{sx:{flexDirection:"column"},children:[(0,s.jsx)(u.xv,{children:i}),(0,s.jsx)(u.xv,{sx:{color:"textClear",fontSize:"12px",lineHeight:"16px"},children:"Missing Slices"})]}),(0,s.jsxs)(u.rU,{href:j.cd[n].getBuilderPagePathname(t),target:"_blank",variant:"cardSmall",children:["View ",en.$[n].name({start:!1,plural:!1})]},t)]})},ei=t(79797),er=t(54132),el=function(e){var n=e.isOpen,t=e.title,i=e.footer,r=e.explanations,l=(0,R.Z)().closeModals;return(0,s.jsx)(ei.Z,{placement:"right",open:n,level:null,onClose:l,width:496,children:(0,s.jsx)(er.Z,{radius:"0px",bodySx:{bg:"white",padding:24,flex:1,display:"flex",flexDirection:"column",overflow:"scroll"},footerSx:{p:0},sx:{flexDirection:"column",display:"flex",height:"100%",border:"none"},borderFooter:!0,Header:function(){return(0,s.jsxs)(u.kC,{sx:{p:"16px",alignItems:"center",justifyContent:"space-between",borderBottom:function(e){var n;return"1px solid ".concat(String(null===(n=e.colors)||void 0===n?void 0:n.borders))}},children:[(0,s.jsx)(u.kC,{sx:{alignItems:"center"},children:(0,s.jsx)(u.X6,{sx:{fontSize:"14px",fontWeight:"bold",ml:1},children:t})}),(0,s.jsx)(u.x8,{type:"button",onClick:function(){return l()}})]})},Footer:function(){return(0,s.jsx)(u.kC,{sx:{flexDirection:"column",justifyContent:"center",alignItems:"center",paddingRight:16,borderTop:function(e){var n;return"1px solid ".concat(String(null===(n=e.colors)||void 0===n?void 0:n.darkBorders))},backgroundColor:"white",padding:20},children:i})},children:r})})},eo=function(e){var n=e.onToggle,t=e.isConfirmed,i=e.sx;return(0,s.jsxs)(u.kC,{sx:(0,M.Z)({borderRadius:6,flexDirection:"column",backgroundColor:"grey03",padding:12,width:"100%"},i),children:[(0,s.jsx)(u.xv,{sx:{fontWeight:"bold",mb:2},children:"Are you sure to proceed?"}),(0,s.jsxs)(u.__,{sx:{mt:"4px",py:1},variant:"large",children:[(0,s.jsx)(u.XZ,{defaultChecked:t,onChange:n,variant:"forms.checkbox.dark"}),"Delete these Documents"]})]})},ec=function(e){var n=e.pushChanges,t=(0,r.useState)(!1),i=t[0],l=t[1],o=(0,a.v9)(function(e){return{isDeleteDocumentsDrawerOpen:(0,$.gP)(e,J.q.SOFT_DELETE_DOCUMENTS_DRAWER),remoteOnlyCustomTypes:(0,K.Ch)(e).filter(g.yp),modalData:e.pushChanges}}),c=o.isDeleteDocumentsDrawerOpen,d=o.remoteOnlyCustomTypes,x=o.modalData,h=(0,R.Z)(),m=h.closeModals,p=h.openToaster;if(!c)return null;if((null==x?void 0:x.type)!=="SOFT")return p("No change data",ee.Jf.ERROR),null;var f=x.details.customTypes.map(function(e){var n,t=d.find(function(n){return(0,g.n5)(n)===e.id});return void 0===t?null:(0,s.jsx)(et,{isOverLimit:!0,ctName:null!==(n=t.remote.label)&&void 0!==n?n:t.remote.id,link:e.url,numberOfDocuments:e.numberOfDocuments},e.id)});return(0,s.jsx)(el,{isOpen:c,title:"Confirm deletion",footer:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eo,{onToggle:function(){l(!i)},isConfirmed:i,sx:{mb:10}}),(0,s.jsx)(Q.z,{label:"Push changes",variant:"primary",onClick:function(){m(),n(i)},disabled:!i,sx:{fontWeight:"bold",color:"white",borderRadius:6,width:"100%"}})]}),explanations:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.xv,{sx:{fontWeight:"bold",mb:1,lineHeight:"24px"},children:"This action will also delete Documents."}),(0,s.jsxs)(u.xv,{sx:{mb:24},children:[x.details.customTypes.length>1?"These types have":"This type has"," ","associated Documents, which will also be deleted. This might create broken links in your repository."]}),f]})})},ea=function(e){var n=e.pushChanges,t=(0,a.v9)(function(e){return{isDeleteDocumentsDrawerOpen:(0,$.gP)(e,J.q.HARD_DELETE_DOCUMENTS_DRAWER),remoteOnlyCustomTypes:(0,K.Ch)(e).filter(g.yp),modalData:e.pushChanges}}),i=t.isDeleteDocumentsDrawerOpen,r=t.remoteOnlyCustomTypes,l=t.modalData,o=(0,R.Z)(),c=o.closeModals,d=o.openToaster;if(!i)return null;if((null==l?void 0:l.type)!=="HARD")return d("No change data",ee.Jf.ERROR),null;var x=l.details.customTypes.map(function(e){var n,t=r.find(function(n){return(0,g.n5)(n)===e.id});return void 0===t?null:(0,s.jsx)(et,{isOverLimit:!0,ctName:null!==(n=t.remote.label)&&void 0!==n?n:t.remote.id,link:e.url,numberOfDocuments:e.numberOfDocuments},e.id)});return(0,s.jsx)(el,{isOpen:i,title:"Manual action required",footer:(0,s.jsx)(Q.z,{label:"Try again",variant:"primary",onClick:function(){c(),n(!1)},sx:{fontWeight:"bold",color:"white",borderRadius:6,width:"100%"}}),explanations:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u.xv,{sx:{fontWeight:"bold",mb:1,lineHeight:"24px"},children:["Your type",l.details.customTypes.length>1&&"s"," cannot be deleted."]}),(0,s.jsxs)(u.xv,{sx:{mb:24},children:[l.details.customTypes.length>1?"These types have":"This type has"," ","too many associated Documents. Archive and delete these Documents manually and then try deleting the types again."]}),x]})})},ed=function(e){var n=e.pushChanges,t=(0,a.v9)(function(e){return{isOpen:(0,$.gP)(e,J.q.REFERENCES_MISSING_DRAWER),localCustomTypes:(0,K.Ch)(e).filter(g.TG),modalData:e.pushChanges}}),i=t.isOpen,r=t.modalData,l=t.localCustomTypes,o=(0,R.Z)(),c=o.closeModals,d=o.openToaster;if(!i)return null;if((null==r?void 0:r.details)===void 0)return d("No change data",ee.Jf.ERROR),null;var x=(null==r?void 0:r.details.customTypes.length)>1,h=r.details.customTypes.map(function(e){var n,t=l.find(function(n){return(0,g.n5)(n)===e.id});return void 0===t?null:(0,s.jsx)(es,{format:t.local.format,id:t.local.id,name:null!==(n=t.local.label)&&void 0!==n?n:t.local.id})});return(0,s.jsx)(el,{isOpen:i,title:"Missing Slices",footer:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(Q.z,{label:"Try again",variant:"primary",onClick:function(){c(),n(!1)},sx:{fontWeight:"bold",color:"white",borderRadius:6,width:"100%"}})}),explanations:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u.xv,{sx:{fontWeight:"bold",mb:1,lineHeight:"24px"},children:["You have",x?"":" a"," type",x?"s":""," that reference"," ",x?"":"s"," one or more missing Slices"]}),(0,s.jsxs)(u.xv,{sx:{mb:24},children:["Before pushing, remove references to any missing Slices by opening"," ","the affected type",x?"s":""," and clicking the"," ",(0,s.jsx)("b",{children:"Save"})," button."]}),h]})})},eu=function(){var e=(0,q.X)(),n=e.unSyncedSlices,t=e.unSyncedCustomTypes,l=e.modelsStatuses,u=e.authStatus,x=e.isOnline,h=(0,r.useMemo)(function(){var e;return{changedSlices:n.map(function(e){return{slice:e,status:l.slices[e.model.id]}}).filter(function(e){return q.O.includes(e.status)}),changedCustomTypes:t.map(function(e){return(0,g.TG)(e)?e.local:e.remote}).map(function(e){return{customType:e,status:l.customTypes[e.id]}}).filter(function(e){return q.O.includes(e.status)})}},[n,t,l]),m=h.changedSlices,p=h.changedCustomTypes,f=(0,R.Z)(),j=f.pushChanges,v=f.closeModals,y=(0,a.v9)(function(e){return{isSyncing:(0,L.hg)(e,X.z.CHANGES_PUSH)}}).isSyncing;(0,r.useEffect)(function(){return function(){v()}},[]);var b=n.length+t.length,_=function(e){return j({confirmDeleteDocuments:e,changedSlices:m,changedCustomTypes:p})},C=(0,r.useMemo)(function(){return x?u===Y.t.UNAUTHORIZED||u===Y.t.FORBIDDEN?(0,s.jsx)(Z,{}):0===b?(0,s.jsx)(V,{}):(0,s.jsx)(O,{unSyncedSlices:n,unSyncedCustomTypes:t,modelsStatuses:l,authStatus:u,isOnline:x}):(0,s.jsx)(N,{})},[x,u,b,n,t,l,]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o(),{children:(0,s.jsx)("title",{children:"Changes - Slice Machine"})}),(0,s.jsxs)(d.LN,{children:[(0,s.jsxs)(d.wd,{children:[(0,s.jsx)(d.Cx,{folder:"Changes"}),(0,s.jsx)(d.K2,{children:(0,s.jsx)(i.zx,{onClick:function(){return _(!1)},loading:y,disabled:0===b||!x||u===Y.t.UNAUTHORIZED||u===Y.t.FORBIDDEN||y,"data-cy":"push-changes",children:"Push Changes"})})]}),(0,s.jsx)(d.RN,{children:(0,s.jsxs)(c.xR,{sx:{display:"flex",flexDirection:"column"},children:[C,(0,s.jsx)(ec,{pushChanges:_}),(0,s.jsx)(ea,{pushChanges:_}),(0,s.jsx)(ed,{pushChanges:_})]})})]})]})}},2754:function(e,n,t){"use strict";t.d(n,{R$:function(){return d},Qj:function(){return p},T9:function(){return x},nf:function(){return m},u2:function(){return u},_T:function(){return h}});var s=t(67557),i=t(62230),r=t(85244),l=t(98240),o=t(52322),c=t(6277),a=t(21658);t(1919);var d=function(e){var n=e.backgroundImage,t=e.style,a=(0,l.Z)(e,["backgroundImage","style"]),d=void 0!==n;return(0,o.jsx)("article",(0,r.Z)((0,i.Z)({},a),{className:(0,c.Z)("_18bjhbz0 _1ecs97d9bi _1ecs97d9bj _1ecs97d9bk _1ecs97d9bt _1ecs97d9sy _1ecs97d9t0 _1ecs97d9t2 _1ecs97dm _1ecs97d7z _1ecs97d268 _1ecs97d2dl _1ecs97d9d7 _1ecs97d9ej _1ecs97d9ex _1ecs97d9c7",(0,s.Z)({},"_18bjhbz1 _1ecs97d9cf _1ecs97d9h3",d)),style:(0,i.Z)({backgroundImage:d?"url(".concat(n,")"):void 0},t)}))},u=function(e){return(0,o.jsx)("div",(0,r.Z)((0,i.Z)({},e),{className:"_1ecs97d9bi _1ecs97d9bj _1ecs97d9bk _1ecs97d9bt _1ecs97d48s _1ecs97d4g5 _1ecs97d9ep _1ecs97d9f1 _1ecs97d9c7"}))},x=function(e){return(0,o.jsx)("div",(0,r.Z)((0,i.Z)({},e),{className:"_18bjhbz3 _1ecs97d9bi _1ecs97d9bj _1ecs97d9bk _1ecs97d9bt _1ecs97d9q5"}))},h=function(e){return(0,o.jsx)(a.xv,(0,r.Z)((0,i.Z)({},e),{className:"_18bjhbz4"}))},m=function(e){return(0,o.jsx)(a.xv,(0,r.Z)((0,i.Z)({},e),{className:"_18bjhbz5",color:"grey11"}))},p=function(e){return(0,o.jsx)(a.hE,(0,r.Z)((0,i.Z)({},e),{className:"_18bjhbz6 _1ecs97d9l3 _1ecs97d9bq _1ecs97d9nl",size:"medium",variant:"secondary"}))}},1919:function(){},25977:function(){}},function(e){e.O(0,[789,123,909,97,918,906,573,774,888,179],function(){return e(e.s=21985)}),_N_E=e.O()}]);