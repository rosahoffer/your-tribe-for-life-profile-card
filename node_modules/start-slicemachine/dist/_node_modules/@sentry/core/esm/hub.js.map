{"version":3,"file":"hub.js","sources":["../../../../../../../node_modules/@sentry/core/esm/hub.js"],"sourcesContent":["import { uuid4, dateTimestampInSeconds, consoleSandbox, logger, GLOBAL_OBJ, isNodeEnv, getGlobalSingleton } from '@sentry/utils';\nimport { DEFAULT_ENVIRONMENT } from './constants.js';\nimport { Scope } from './scope.js';\nimport { closeSession, makeSession, updateSession } from './session.js';\n\n/**\n * API compatibility version of this hub.\n *\n * WARNING: This number should only be increased when the global interface\n * changes and new methods are introduced.\n *\n * @hidden\n */\nconst API_VERSION = 4;\n\n/**\n * Default maximum number of breadcrumbs added to an event. Can be overwritten\n * with {@link Options.maxBreadcrumbs}.\n */\nconst DEFAULT_BREADCRUMBS = 100;\n\n/**\n * A layer in the process stack.\n * @hidden\n */\n\n/**\n * @inheritDoc\n */\nclass Hub  {\n  /** Is a {@link Layer}[] containing the client and scope */\n    __init() {this._stack = [{}];}\n\n  /** Contains the last event id of a captured event.  */\n\n  /**\n   * Creates a new instance of the hub, will push one {@link Layer} into the\n   * internal stack on creation.\n   *\n   * @param client bound to the hub.\n   * @param scope bound to the hub.\n   * @param version number, higher number means higher priority.\n   */\n   constructor(client, scope = new Scope(),   _version = API_VERSION) {this._version = _version;Hub.prototype.__init.call(this);\n    this.getStackTop().scope = scope;\n    if (client) {\n      this.bindClient(client);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   isOlderThan(version) {\n    return this._version < version;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   bindClient(client) {\n    const top = this.getStackTop();\n    top.client = client;\n    if (client && client.setupIntegrations) {\n      client.setupIntegrations();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   pushScope() {\n    // We want to clone the content of prev scope\n    const scope = Scope.clone(this.getScope());\n    this.getStack().push({\n      client: this.getClient(),\n      scope,\n    });\n    return scope;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   popScope() {\n    if (this.getStack().length <= 1) return false;\n    return !!this.getStack().pop();\n  }\n\n  /**\n   * @inheritDoc\n   */\n   withScope(callback) {\n    const scope = this.pushScope();\n    try {\n      callback(scope);\n    } finally {\n      this.popScope();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getClient() {\n    return this.getStackTop().client ;\n  }\n\n  /** Returns the scope of the top stack. */\n   getScope() {\n    return this.getStackTop().scope;\n  }\n\n  /** Returns the scope stack for domains or the process. */\n   getStack() {\n    return this._stack;\n  }\n\n  /** Returns the topmost scope layer in the order domain > local > process. */\n   getStackTop() {\n    return this._stack[this._stack.length - 1];\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureException(exception, hint) {\n    const eventId = (this._lastEventId = hint && hint.event_id ? hint.event_id : uuid4());\n    const syntheticException = new Error('Sentry syntheticException');\n    this._withClient((client, scope) => {\n      client.captureException(\n        exception,\n        {\n          originalException: exception,\n          syntheticException,\n          ...hint,\n          event_id: eventId,\n        },\n        scope,\n      );\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureMessage(\n    message,\n    // eslint-disable-next-line deprecation/deprecation\n    level,\n    hint,\n  ) {\n    const eventId = (this._lastEventId = hint && hint.event_id ? hint.event_id : uuid4());\n    const syntheticException = new Error(message);\n    this._withClient((client, scope) => {\n      client.captureMessage(\n        message,\n        level,\n        {\n          originalException: message,\n          syntheticException,\n          ...hint,\n          event_id: eventId,\n        },\n        scope,\n      );\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureEvent(event, hint) {\n    const eventId = hint && hint.event_id ? hint.event_id : uuid4();\n    if (!event.type) {\n      this._lastEventId = eventId;\n    }\n\n    this._withClient((client, scope) => {\n      client.captureEvent(event, { ...hint, event_id: eventId }, scope);\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   lastEventId() {\n    return this._lastEventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addBreadcrumb(breadcrumb, hint) {\n    const { scope, client } = this.getStackTop();\n\n    if (!scope || !client) return;\n\n    const { beforeBreadcrumb = null, maxBreadcrumbs = DEFAULT_BREADCRUMBS } =\n      (client.getOptions && client.getOptions()) || {};\n\n    if (maxBreadcrumbs <= 0) return;\n\n    const timestamp = dateTimestampInSeconds();\n    const mergedBreadcrumb = { timestamp, ...breadcrumb };\n    const finalBreadcrumb = beforeBreadcrumb\n      ? (consoleSandbox(() => beforeBreadcrumb(mergedBreadcrumb, hint)) )\n      : mergedBreadcrumb;\n\n    if (finalBreadcrumb === null) return;\n\n    scope.addBreadcrumb(finalBreadcrumb, maxBreadcrumbs);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setUser(user) {\n    const scope = this.getScope();\n    if (scope) scope.setUser(user);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTags(tags) {\n    const scope = this.getScope();\n    if (scope) scope.setTags(tags);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtras(extras) {\n    const scope = this.getScope();\n    if (scope) scope.setExtras(extras);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTag(key, value) {\n    const scope = this.getScope();\n    if (scope) scope.setTag(key, value);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtra(key, extra) {\n    const scope = this.getScope();\n    if (scope) scope.setExtra(key, extra);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n   setContext(name, context) {\n    const scope = this.getScope();\n    if (scope) scope.setContext(name, context);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   configureScope(callback) {\n    const { scope, client } = this.getStackTop();\n    if (scope && client) {\n      callback(scope);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   run(callback) {\n    const oldHub = makeMain(this);\n    try {\n      callback(this);\n    } finally {\n      makeMain(oldHub);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getIntegration(integration) {\n    const client = this.getClient();\n    if (!client) return null;\n    try {\n      return client.getIntegration(integration);\n    } catch (_oO) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Cannot retrieve integration ${integration.id} from the current Hub`);\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   startTransaction(context, customSamplingContext) {\n    return this._callExtensionMethod('startTransaction', context, customSamplingContext);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   traceHeaders() {\n    return this._callExtensionMethod('traceHeaders');\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureSession(endSession = false) {\n    // both send the update and pull the session from the scope\n    if (endSession) {\n      return this.endSession();\n    }\n\n    // only send the update\n    this._sendSessionUpdate();\n  }\n\n  /**\n   * @inheritDoc\n   */\n   endSession() {\n    const layer = this.getStackTop();\n    const scope = layer && layer.scope;\n    const session = scope && scope.getSession();\n    if (session) {\n      closeSession(session);\n    }\n    this._sendSessionUpdate();\n\n    // the session is over; take it off of the scope\n    if (scope) {\n      scope.setSession();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   startSession(context) {\n    const { scope, client } = this.getStackTop();\n    const { release, environment = DEFAULT_ENVIRONMENT } = (client && client.getOptions()) || {};\n\n    // Will fetch userAgent if called from browser sdk\n    const { userAgent } = GLOBAL_OBJ.navigator || {};\n\n    const session = makeSession({\n      release,\n      environment,\n      ...(scope && { user: scope.getUser() }),\n      ...(userAgent && { userAgent }),\n      ...context,\n    });\n\n    if (scope) {\n      // End existing session if there's one\n      const currentSession = scope.getSession && scope.getSession();\n      if (currentSession && currentSession.status === 'ok') {\n        updateSession(currentSession, { status: 'exited' });\n      }\n      this.endSession();\n\n      // Afterwards we set the new session on the scope\n      scope.setSession(session);\n    }\n\n    return session;\n  }\n\n  /**\n   * Returns if default PII should be sent to Sentry and propagated in ourgoing requests\n   * when Tracing is used.\n   */\n   shouldSendDefaultPii() {\n    const client = this.getClient();\n    const options = client && client.getOptions();\n    return Boolean(options && options.sendDefaultPii);\n  }\n\n  /**\n   * Sends the current Session on the scope\n   */\n   _sendSessionUpdate() {\n    const { scope, client } = this.getStackTop();\n    if (!scope) return;\n\n    const session = scope.getSession();\n    if (session) {\n      if (client && client.captureSession) {\n        client.captureSession(session);\n      }\n    }\n  }\n\n  /**\n   * Internal helper function to call a method on the top client if it exists.\n   *\n   * @param method The method to call on the client.\n   * @param args Arguments to pass to the client function.\n   */\n   _withClient(callback) {\n    const { scope, client } = this.getStackTop();\n    if (client) {\n      callback(client, scope);\n    }\n  }\n\n  /**\n   * Calls global extension method and binding current instance to the function call\n   */\n  // @ts-ignore Function lacks ending return statement and return type does not include 'undefined'. ts(2366)\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n   _callExtensionMethod(method, ...args) {\n    const carrier = getMainCarrier();\n    const sentry = carrier.__SENTRY__;\n    if (sentry && sentry.extensions && typeof sentry.extensions[method] === 'function') {\n      return sentry.extensions[method].apply(this, args);\n    }\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Extension method ${method} couldn't be found, doing nothing.`);\n  }\n}\n\n/**\n * Returns the global shim registry.\n *\n * FIXME: This function is problematic, because despite always returning a valid Carrier,\n * it has an optional `__SENTRY__` property, which then in turn requires us to always perform an unnecessary check\n * at the call-site. We always access the carrier through this function, so we can guarantee that `__SENTRY__` is there.\n **/\nfunction getMainCarrier() {\n  GLOBAL_OBJ.__SENTRY__ = GLOBAL_OBJ.__SENTRY__ || {\n    extensions: {},\n    hub: undefined,\n  };\n  return GLOBAL_OBJ;\n}\n\n/**\n * Replaces the current main hub with the passed one on the global object\n *\n * @returns The old replaced hub\n */\nfunction makeMain(hub) {\n  const registry = getMainCarrier();\n  const oldHub = getHubFromCarrier(registry);\n  setHubOnCarrier(registry, hub);\n  return oldHub;\n}\n\n/**\n * Returns the default hub instance.\n *\n * If a hub is already registered in the global carrier but this module\n * contains a more recent version, it replaces the registered version.\n * Otherwise, the currently registered hub will be returned.\n */\nfunction getCurrentHub() {\n  // Get main carrier (global for every environment)\n  const registry = getMainCarrier();\n\n  // If there's no hub, or its an old API, assign a new one\n  if (!hasHubOnCarrier(registry) || getHubFromCarrier(registry).isOlderThan(API_VERSION)) {\n    setHubOnCarrier(registry, new Hub());\n  }\n\n  // Prefer domains over global if they are there (applicable only to Node environment)\n  if (isNodeEnv()) {\n    return getHubFromActiveDomain(registry);\n  }\n  // Return hub that lives on a global object\n  return getHubFromCarrier(registry);\n}\n\n/**\n * Try to read the hub from an active domain, and fallback to the registry if one doesn't exist\n * @returns discovered hub\n */\nfunction getHubFromActiveDomain(registry) {\n  try {\n    const sentry = getMainCarrier().__SENTRY__;\n    const activeDomain = sentry && sentry.extensions && sentry.extensions.domain && sentry.extensions.domain.active;\n\n    // If there's no active domain, just return global hub\n    if (!activeDomain) {\n      return getHubFromCarrier(registry);\n    }\n\n    // If there's no hub on current domain, or it's an old API, assign a new one\n    if (!hasHubOnCarrier(activeDomain) || getHubFromCarrier(activeDomain).isOlderThan(API_VERSION)) {\n      const registryHubTopStack = getHubFromCarrier(registry).getStackTop();\n      setHubOnCarrier(activeDomain, new Hub(registryHubTopStack.client, Scope.clone(registryHubTopStack.scope)));\n    }\n\n    // Return hub that lives on a domain\n    return getHubFromCarrier(activeDomain);\n  } catch (_Oo) {\n    // Return hub that lives on a global object\n    return getHubFromCarrier(registry);\n  }\n}\n\n/**\n * This will tell whether a carrier has a hub on it or not\n * @param carrier object\n */\nfunction hasHubOnCarrier(carrier) {\n  return !!(carrier && carrier.__SENTRY__ && carrier.__SENTRY__.hub);\n}\n\n/**\n * This will create a new {@link Hub} and add to the passed object on\n * __SENTRY__.hub.\n * @param carrier object\n * @hidden\n */\nfunction getHubFromCarrier(carrier) {\n  return getGlobalSingleton('hub', () => new Hub(), carrier);\n}\n\n/**\n * This will set passed {@link Hub} on the passed object's __SENTRY__.hub attribute\n * @param carrier object\n * @param hub Hub\n * @returns A boolean indicating success or failure\n */\nfunction setHubOnCarrier(carrier, hub) {\n  if (!carrier) return false;\n  const __SENTRY__ = (carrier.__SENTRY__ = carrier.__SENTRY__ || {});\n  __SENTRY__.hub = hub;\n  return true;\n}\n\nexport { API_VERSION, Hub, getCurrentHub, getHubFromCarrier, getMainCarrier, makeMain, setHubOnCarrier };\n//# sourceMappingURL=hub.js.map\n"],"names":[],"mappings":"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","x_google_ignoreList":[0]}