import { dirname, basename } from "../../utils/esm/path.js";
function normalizePath(path) {
  return path.replace(/^[A-Z]:/, "").replace(/\\/g, "/");
}
function getModule(filename) {
  if (!filename) {
    return;
  }
  const normalizedFilename = normalizePath(filename);
  const base = normalizePath(
    `${require && require.main && require.main.filename && dirname(require.main.filename) || global.process.cwd()}/`
  );
  const file = basename(normalizedFilename, ".js");
  const path = dirname(normalizedFilename);
  let n = path.lastIndexOf("/node_modules/");
  if (n > -1) {
    return `${path.slice(n + 14).replace(/\//g, ".")}:${file}`;
  }
  n = `${path}/`.lastIndexOf(base, 0);
  if (n === 0) {
    let moduleName = path.slice(base.length).replace(/\//g, ".");
    if (moduleName) {
      moduleName += ":";
    }
    moduleName += file;
    return moduleName;
  }
  return file;
}
export {
  getModule
};
//# sourceMappingURL=module.js.map
