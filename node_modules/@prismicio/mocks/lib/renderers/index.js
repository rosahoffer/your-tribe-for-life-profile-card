"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.renderSliceMock = exports.renderDocumentMock = void 0;
const tslib_1 = require("tslib");
const api_renderer_1 = require("@prismicio/api-renderer");
const models_1 = require("@prismicio/api-renderer/lib/models");
const SharedSlice_1 = require("@prismicio/api-renderer/lib/models/ApiModel/slices/SharedSlice");
const uuid_1 = require("uuid");
const MockContext_1 = (0, tslib_1.__importDefault)(require("./MockContext"));
function renderDocumentMock(customType, sharedSlices, mocks) {
    const apiModel = (0, models_1.fromCustomType)(customType, sharedSlices);
    const filteredMocks = Object.entries(mocks).filter(Boolean);
    return (0, api_renderer_1.DocumentRenderer)(MockContext_1.default).renderMocks(apiModel, filteredMocks);
}
exports.renderDocumentMock = renderDocumentMock;
function renderSliceMock(sliceModel, mock) {
    const apiModel = SharedSlice_1.SharedSliceDef.encode((0, SharedSlice_1.fromSharedSlice)(sliceModel.id, sliceModel));
    return {
        ...(0, api_renderer_1.SharedSliceRenderer)(MockContext_1.default).renderMocks(apiModel, mock),
        id: `${sliceModel.id}$${(0, uuid_1.v4)()}`,
        slice_type: sliceModel.id,
    };
}
exports.renderSliceMock = renderSliceMock;
