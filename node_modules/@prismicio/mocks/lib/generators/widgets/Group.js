"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.GroupMock = void 0;
const fields_1 = require("@prismicio/types-internal/lib/content/fields");
const _1 = require(".");
function random(def, nbBlocks = 1, fields = {}) {
    if (!def.config || !def.config.fields) {
        return [];
    }
    return Array(nbBlocks)
        .fill(null)
        .map(() => {
        var _a;
        const defs = Object.entries(((_a = def === null || def === void 0 ? void 0 : def.config) === null || _a === void 0 ? void 0 : _a.fields) || {});
        const block = defs.map(([key, field]) => {
            const mockConfig = fields[key];
            return [key, _1.NestableWidgetMock.generate(field, mockConfig)];
        });
        return block;
    });
}
exports.GroupMock = {
    generate(def, config) {
        const value = (config === null || config === void 0 ? void 0 : config.value) || random(def, config === null || config === void 0 ? void 0 : config.nbBlocks, config === null || config === void 0 ? void 0 : config.fields);
        return {
            __TYPE__: fields_1.GroupContentType,
            value: value.map((item) => ({
                __TYPE__: fields_1.GroupItemContentType,
                value: item,
            })),
        };
    },
};
