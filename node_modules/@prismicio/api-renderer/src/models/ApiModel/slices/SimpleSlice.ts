import type { LegacySlice } from "@prismicio/types-internal/lib/customtypes/widgets/slices"
import { addType } from "@prismicio/types-internal/lib/validators/function"
import * as t from "io-ts"

import { fromStatic, StaticDef } from "../StaticField"

export const SimpleSliceDefType = "simpleSliceDef"
export const SimpleSliceDef = addType(
	t.type({
		name: t.string,
		widget: StaticDef,
	}),
	SimpleSliceDefType,
)
export type SimpleSliceDef = t.TypeOf<typeof SimpleSliceDef>
export type SimpleSliceDefO = t.OutputOf<typeof SimpleSliceDef>

export function fromSimpleSlice(key: string, model: LegacySlice): SimpleSliceDef {
	return {
		name: key,
		widget: fromStatic(key, model),
	}
}
