import type { BooleanField } from "@prismicio/types-internal/lib/customtypes/widgets/nestable"
import * as t from "io-ts"
import { mapOutput } from "io-ts-types/lib/mapOutput"

export const BooleanFieldDefType = "booleanFieldDef"
export const BooleanFieldDef = mapOutput(
	t.strict({
		booleanField: t.string,
		config: t.strict({
			default_value: t.boolean,
		}),
	}),
	(o) => ({ name: o.booleanField, __TYPE__: BooleanFieldDefType } as const),
)
export type BooleanFieldDef = t.TypeOf<typeof BooleanFieldDef>
export type BooleanFieldDefO = t.OutputOf<typeof BooleanFieldDef>

export function fromBoolean(key: string, model: BooleanField): BooleanFieldDef {
	return {
		booleanField: key,
		config: {
			default_value: model.config?.default_value || false,
		},
	}
}
