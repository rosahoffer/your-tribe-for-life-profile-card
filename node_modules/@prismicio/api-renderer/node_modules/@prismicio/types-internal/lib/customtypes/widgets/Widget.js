"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Widgets = exports.DynamicWidget = exports.StaticWidget = exports.widgetReader = void 0;
const tslib_1 = require("tslib");
const t = (0, tslib_1.__importStar)(require("io-ts"));
const Group_1 = (0, tslib_1.__importDefault)(require("./Group"));
const NestableWidget_1 = (0, tslib_1.__importDefault)(require("./nestable/NestableWidget"));
const Slices_1 = require("./slices/Slices");
const UID_1 = (0, tslib_1.__importDefault)(require("./UID"));
const WidgetTypes_1 = require("./WidgetTypes");
function widgetReader(codec) {
    return t.union([UID_1.default, NestableWidget_1.default, Group_1.default, codec]);
}
exports.widgetReader = widgetReader;
exports.StaticWidget = widgetReader(Slices_1.StaticSlices);
exports.DynamicWidget = widgetReader(Slices_1.DynamicSlices);
exports.Widgets = {
    toStatic(widget, sharedSlices) {
        switch (widget.type) {
            case WidgetTypes_1.WidgetTypes.LegacySlices:
            case WidgetTypes_1.WidgetTypes.Slices:
                return Slices_1.Slices.toStatic(widget, sharedSlices);
            default:
                return widget;
        }
    },
};
