"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SliceWidgetContent = void 0;
const tslib_1 = require("tslib");
const O = (0, tslib_1.__importStar)(require("fp-ts/Option"));
const StaticWidgetContent_1 = (0, tslib_1.__importDefault)(require("../StaticWidgetContent"));
const CompositeSliceContent_1 = require("./CompositeSliceContent");
const SharedSliceContent_1 = require("./SharedSliceContent");
exports.SliceWidgetContent = {
    fromJson: (prefixes, key, value, fieldTypes, fieldPositions) => {
        const prefixedKey = Array.of(prefixes, [key]).flat().join(".");
        const fieldType = fieldTypes.get(prefixedKey);
        if (fieldType === "SharedSlice") {
            return SharedSliceContent_1.SharedSliceContent.fromJson(prefixes, key, value, fieldTypes, fieldPositions);
        }
        else if (fieldType === "Slice") {
            return CompositeSliceContent_1.CompositeSliceContent.fromJson(prefixes, key, value, fieldTypes, fieldPositions);
        }
        else if (fieldType) {
            return StaticWidgetContent_1.default.fromJson(prefixes, key, value, fieldTypes, fieldPositions);
        }
        else {
            return O.none;
        }
    },
};
