import * as t from "io-ts"

import { StringOrNull } from "../../../../validators"
import { addType } from "../../../../validators/function"

export const ImageLinkType = "ImageLink"
export const ImageLink = addType(
	t.exact(
		t.intersection([
			t.type({
				id: t.string,
				url: t.string,
				height: t.string,
				width: t.string,
				size: t.string,
				name: t.string,
				kind: t.string,
			}),
			t.partial({
				date: StringOrNull,
			}),
		]),
	),
	ImageLinkType,
)

export type ImageLink = t.TypeOf<typeof ImageLink>
export type ImageLinkO = t.OutputOf<typeof ImageLink>
export function isImageLink(u: unknown): u is ImageLinkO {
	return (u as ImageLinkO).__TYPE__ === ImageLinkType
}
