import * as t from "io-ts"

import { SlicesContentType as type } from "../../../documents/widgets/slices"
import { CompositeSliceContent } from "./CompositeSliceContent"
import { SharedSliceContent } from "./SharedSliceContent"
import { SimpleSliceContent } from "./SimpleSliceContent"

export const SliceItemContent = t.type({
	key: t.string,
	name: t.string,
	maybeLabel: t.union([t.string, t.undefined]),
	widget: t.union([
		CompositeSliceContent,
		SharedSliceContent,
		SimpleSliceContent,
	]),
})

export type SliceContentItem = t.TypeOf<typeof SliceItemContent>

export const SlicesContent = t.type({
	__TYPE__: t.literal(type),
	value: t.array(SliceItemContent),
})

export type SlicesContent = t.TypeOf<typeof SlicesContent>

export const SlicesContentType = type
