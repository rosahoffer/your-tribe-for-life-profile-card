import * as t from "io-ts"

import { GroupItemContentType } from "../GroupContent"
import { NestableContent } from "../nestable"

const RepeatableWidget = t.tuple([t.string, NestableContent])
const RepeatableWidgetsBlock = t.strict({
	// We need to get rid of this type that is referencing a GroupType even though it's not.
	// We keep it for now for compatibility with `@prismicio/api-renderer`
	__TYPE__: t.literal(GroupItemContentType),
	value: t.array(RepeatableWidget),
})
t.array(RepeatableWidget)

export const RepeatableWidgets = t.array(RepeatableWidgetsBlock)
